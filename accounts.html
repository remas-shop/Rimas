<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙƒØ§Ø¯Ùˆ - Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</title>
<style>
  body { font-family: 'Cairo', sans-serif; padding:20px; background:#f9f9f9; color:#004d40; }
  h1 { text-align:center; color:#008080; }
  table { width:100%; border-collapse: collapse; margin-top:20px; }
  th, td { border:1px solid #004d40; padding:8px; text-align:center; }
  th { background:#008080; color:white; }
  button { padding:8px 12px; border:none; border-radius:5px; background:#25D366; color:white; cursor:pointer; margin-top:15px; }
</style>
</head>
<body>

<h1>ÙƒØ§Ø¯Ùˆ - Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h1>

<!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª -->
<table id="operationsTable">
  <thead>
    <tr>
      <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
      <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
      <th>Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th>
      <th>Ø§Ù„Ù…Ù†ØªØ¬/Ø§Ù„Ø¨Ù†Ø¯</th>
      <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
      <th>Ø§Ù„Ø³Ø¹Ø±</th>
      <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
    </tr>
  </thead>
  <tbody>
    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© JS -->
  </tbody>
</table>

<!-- Ø²Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ -->
<button onclick="sendDailyReport()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø¹Ø¨Ø± WhatsApp</button>

<script>
  // --- Ù…Ø«Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„ÙŠØ© ---
  const currentUser = 'Ø­Ø³Ø§Ù†'; // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
  const operations = [
    { date: '2025-10-02', user:'Ø­Ø³Ø§Ù†', type:'Ø¨ÙŠØ¹', item:'ÙƒØ¹Ùƒ', quantity:10, price:5000 },
    { date: '2025-10-02', user:'Ø´Ø±ÙŠÙƒ', type:'Ø´Ø±Ø§Ø¡ Ù…ÙˆØ§Ø¯', item:'Ø·Ø­ÙŠÙ†', quantity:2, price:2000 },
    { date: '2025-10-02', user:'Ø­Ø³Ø§Ù†', type:'ØµØ±Ù', item:'ØºØ§Ø²', quantity:1, price:1000 },
  ];

  // --- Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ---
  const tbody = document.querySelector('#operationsTable tbody');
  operations.forEach(op=>{
    const sum = op.quantity*op.price;
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${op.date}</td><td>${op.user}</td><td>${op.type}</td><td>${op.item}</td><td>${op.quantity}</td><td>${op.price}</td><td>${sum}</td>`;
    tbody.appendChild(tr);
  });

  // --- Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø¹Ø¨Ø± WhatsApp ---
  function sendDailyReport(){
    const today = new Date();
    const todayStr = today.toISOString().split('T')[0];
    let message = `ğŸ“‹ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ… ${todayStr}\n\n`;
    const todayOps = operations.filter(op => op.date === todayStr);
    if(todayOps.length===0){ alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…'); return; }
    let totalSell=0,totalBuy=0,totalExpense=0;
    todayOps.forEach(op=>{
      const sum = op.quantity*op.price;
      message += `- ${op.type} | ${op.item} x ${op.quantity} = ${sum} Ø¯.Ø¹ | Ø¨ÙˆØ§Ø³Ø·Ø©: ${op.user}\n`;
      if(op.type==='Ø¨ÙŠØ¹') totalSell+=sum;
      else if(op.type==='Ø´Ø±Ø§Ø¡ Ù…ÙˆØ§Ø¯') totalBuy+=sum;
      else if(op.type==='ØµØ±Ù') totalExpense+=sum;
    });
    const netProfit = totalSell-(totalBuy+totalExpense);
    message += `\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: ${totalSell} Ø¯.Ø¹\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§Ø¯: ${totalBuy} Ø¯.Ø¹\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: ${totalExpense} Ø¯.Ø¹\nØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­: ${netProfit} Ø¯.Ø¹`;
    
    // Ø±Ù‚Ù…Ùƒ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    const phone = '9647702684155';
    const waLink = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    window.open(waLink,'_blank');
  }
</script>

</body>
</html>
